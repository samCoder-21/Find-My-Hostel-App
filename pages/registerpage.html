<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register</title>
  <link rel="stylesheet" href="../styles/registerPage.css">
  <script>
    function handleRegister(event) {
      event.preventDefault();

      // Get form values
      const fname = document.registerForm.fname.value.trim();
      const lname = document.registerForm.lname.value.trim();
      const age = document.registerForm.age.value.trim();
      const school = document.registerForm.school.value.trim();
      const password = document.registerForm.password.value.trim();

      // Validate fields
      if (!fname || !lname || !age || !school || !password) {
        alert("All fields are required!");
        return false;
      }

      // Combine first and last name
      const username = `${fname} ${lname}`;

      // Create userDetails object
      const userDetails = {
        username,
        age,
        school,
        password, // Ideally, passwords should be hashed before storage
        status: "loggedIn", // Automatically logged in after registration
        bookings: [] // Initialize with an empty array for future bookings,
      };

      // Save userDetails to localStorage
      localStorage.setItem('username', JSON.stringify(userDetails));

      // Confirmation and redirect
      alert("Registration successful! You are now logged in.");
      window.location.href = "./dashboard.html";
    }
  </script>
</head>
<body>
  <h1>Register</h1>
  <form id="registerForm" name="registerForm" onsubmit="handleRegister(event)">
    <input type="text" name="fname" placeholder="Enter First Name" required>
    <input type="text" name="lname" placeholder="Enter Last Name" required>
    <input type="number" name="age" placeholder="Enter Age" min="1" required>
    <input type="text" name="school" placeholder="Enter School/College Name" required>
    <input type="password" name="password" placeholder="Enter Password" required>
    <button class="submitBtn" type="submit">Register</button>

    <!-- Waves for styling -->
    <svg width="100%" id="waveRegister" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
      <path fill="#FF5C02" fill-opacity="1" d="M0,160L48,133.3C96,107,192,53,288,26.7C384,0,480,0,576,26.7C672,53,768,107,864,117.3C960,128,1056,96,1152,117.3C1248,139,1344,213,1392,250.7L1440,288L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
    </svg>

    <svg id="waveRegister1" width="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
      <path fill="#FF5C02" fill-opacity="1" d="M0,160L48,133.3C96,107,192,53,288,26.7C384,0,480,0,576,26.7C672,53,768,107,864,117.3C960,128,1056,96,1152,117.3C1248,139,1344,213,1392,250.7L1440,288L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"></path>
    </svg>
  </form>

  <div class="loginOption">
    Already registered? <a href="./loginpage.html">Login</a>
  </div>
</body>
</html>
